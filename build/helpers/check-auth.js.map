{"version":3,"sources":["../../src/helpers/check-auth.js"],"names":["module","exports","req","res","next","console","log","headers","authorization","token","split","Error","decodedToken","jwt","verify","process","env","JWT_SECRET","userData","id","err"],"mappings":";;AAAA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AACjC,MAAI;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYJ,GAAG,CAACK,OAAJ,CAAYC,aAAxB;AACA,QAAMC,KAAK,GAAGP,GAAG,CAACK,OAAJ,CAAYC,aAAZ,CAA0BE,KAA1B,CAAgC,GAAhC,EAAqC,CAArC,CAAd;;AACA,QAAG,CAACD,KAAJ,EAAW;AACP,YAAM,IAAIE,KAAJ,CAAU,wBAAV,CAAN;AACH;;AACD,QAAMC,YAAY,GAAGC,yBAAIC,MAAJ,CAAWL,KAAX,EAAkBM,OAAO,CAACC,GAAR,CAAYC,UAA9B,CAArB;;AACAf,IAAAA,GAAG,CAACgB,QAAJ,GAAe;AAACC,MAAAA,EAAE,EAAEP,YAAY,CAACO;AAAlB,KAAf;AACAf,IAAAA,IAAI;AACP,GATD,CASE,OAAMgB,GAAN,EAAW;AACTf,IAAAA,OAAO,CAACC,GAAR,CAAYc,GAAZ;AACH;AACJ,CAbD","sourcesContent":["import 'dotenv/config';\nimport jwt from 'jsonwebtoken'\n\nmodule.exports = (req, res, next) => {\n    try {\n        console.log(req.headers.authorization)\n        const token = req.headers.authorization.split(' ')[1];\n        if(!token) {\n            throw new Error('Authentication failed!');\n        }\n        const decodedToken = jwt.verify(token, process.env.JWT_SECRET)\n        req.userData = {id: decodedToken.id};\n        next();\n    } catch(err) {\n        console.log(err);\n    }\n};"],"file":"check-auth.js"}